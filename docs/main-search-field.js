!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.geonorge=t():e.geonorge=t()}(self,(function(){return(()=>{var e={678:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(62),s=r.n(n),o=r(638),i=r.n(o)()(s());i.push([e.id,'.main-search-field{font-family:"Open Sans",sans-serif;display:flex;height:37px;padding-top:.75em;position:relative;width:100%}@media(min-width: 35em){.main-search-field{padding-top:0}}.main-search-field .mainSearchLabel{width:0;height:0;overflow:hidden;opacity:0}.main-search-field input{height:37px;outline-offset:-2px;-webkit-appearance:none;background:#fff;border:1px solid #dfdcda;border-right:0;border-radius:2px 0 0 2px;font-size:1.2em;flex:1;margin:0;padding:0 .75em}.main-search-field button{margin:0;-webkit-appearance:button;background:#fff;border:1px solid #dfdcda;border-left:0;border-radius:0 2px 2px 0;display:inline-block;padding:0 .75em;height:100%}.main-search-field button svg{height:22px;width:21px}.search-results-container{-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);-moz-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);-webkit-border-radius:0 0 3px 3px;border-radius:0 0 3px 3px;position:absolute;background:#fbfcfd;display:none;top:37px;z-index:1}.search-results-container.open{display:block;width:100%;overflow-y:auto}.search-results-container a{color:#3767c7;text-decoration:none}.search-results-container div.search-results-for-type:nth-child(odd){background-color:#fbfcfd}.search-results-container div.search-results-for-type:nth-child(even){background-color:#f5f6f7}.search-results-container div.search-results-for-type a.search-results-for-type-title{padding:8px 16px;font-size:1.2em;display:inline-block;color:#3767c7}.search-results-container div.search-results-for-type a.search-results-for-type-title span.search-results-for-type-number-badge{-webkit-border-radius:6px;border-radius:6px;padding:2px 4px;color:#fff;background-color:#fe5000;display:inline-block;font-size:.8em;vertical-align:text-bottom}.search-results-container div.search-results-for-type ul.search-results-for-type-list{list-style:none;padding:0 16px 8px 32px;margin:0}.search-results-container div.search-results-for-type ul.search-results-for-type-list li a{padding:4px 0;display:block}',"",{version:3,sources:["webpack://custom-elements/main-navigation/main-search-field/main-search-field.scss","webpack://style/variables/_typography.scss","webpack://style/mixins/_box-shadow.scss","webpack://style/mixins/_border-radius.scss","webpack://style/variables/_colors.scss"],names:[],mappings:"AAEA,mBACE,kCCHa,CDIb,YAAA,CACA,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,UAAA,CACA,wBAPF,mBAQI,aAAA,CAAA,CAGF,oCACE,OAAA,CACA,QAAA,CACA,eAAA,CACA,SAAA,CAGF,yBACE,WAAA,CACA,mBAAA,CACA,uBAAA,CACA,eAAA,CACA,wBAAA,CACA,cAAA,CACA,yBAAA,CACA,eAAA,CACA,MAAA,CACA,QAAA,CACA,eAAA,CAGF,0BACE,QAAA,CACA,yBAAA,CACA,eAAA,CACA,wBAAA,CACA,aAAA,CACA,yBAAA,CACA,oBAAA,CACA,eAAA,CACA,WAAA,CAEA,8BACE,WAAA,CACA,UAAA,CAKN,0BEnDI,8GFoDF,CEnDE,2GFmDF,CElDE,sGFkDF,CGpDA,iCHyDuB,CGxDvB,yBHwDuB,CACvB,iBAAA,CACA,kBAAA,CACA,YAAA,CACA,QAAA,CACA,SAAA,CAEA,+BACE,aAAA,CACA,UAAA,CACA,eAAA,CAGF,4BACE,aI7DW,CJ8DX,oBAAA,CAIA,qEACE,wBAAA,CAEF,sEACE,wBAAA,CAEF,sFACE,gBAAA,CACA,eAAA,CACA,oBAAA,CACA,aI5ES,CJ6ET,gIGvFJ,yBHwF6B,CGvF7B,iBHuF6B,CACvB,eAAA,CACA,UAAA,CACA,wBIxFQ,CJyFR,oBAAA,CACA,cAAA,CACA,0BAAA,CAGJ,sFACE,eAAA,CACA,uBAAA,CACA,QAAA,CAEE,2FACE,aAAA,CACA,aAAA",sourcesContent:['@import "../../../style/all";\n\n.main-search-field {\n  font-family: $default-font;\n  display: flex;\n  height: 37px;\n  padding-top: 0.75em;\n  position: relative;\n  width: 100%;\n  @media (min-width: 35em) {\n    padding-top: 0;\n  }\n\n  .mainSearchLabel {\n    width: 0;\n    height: 0;\n    overflow: hidden;\n    opacity: 0;\n  }\n\n  input {\n    height: 37px;\n    outline-offset: -2px;\n    -webkit-appearance: none;\n    background: #fff;\n    border: 1px solid #dfdcda;\n    border-right: 0;\n    border-radius: 2px 0 0 2px;\n    font-size: 1.2em;\n    flex: 1;\n    margin: 0;\n    padding: 0 0.75em;\n  }\n\n  button {\n    margin: 0;\n    -webkit-appearance: button;\n    background: #fff;\n    border: 1px solid #dfdcda;\n    border-left: 0;\n    border-radius: 0 2px 2px 0;\n    display: inline-block;\n    padding: 0 0.75em;\n    height: 100%;\n\n    svg {\n      height: 22px;\n      width: 21px;\n    }\n  }\n}\n\n.search-results-container {\n  @include box-shadow(\n    0 5px 5px -3px rgba(0, 0, 0, 0.2),\n    0 8px 10px 1px rgba(0, 0, 0, 0.14),\n    0 3px 14px 2px rgba(0, 0, 0, 0.12)\n  );\n  @include border-radius(0 0 3px 3px);\n  position: absolute;\n  background: #fbfcfd;\n  display: none;\n  top: 37px;\n  z-index: 1;\n\n  &.open {\n    display: block;\n    width: 100%;\n    overflow-y: auto;\n  }\n\n  a {\n    color: $anchor-active;\n    text-decoration: none;\n  }\n\n  div.search-results-for-type {\n    &:nth-child(odd) {\n      background-color: #fbfcfd;\n    }\n    &:nth-child(even) {\n      background-color: #f5f6f7;\n    }\n    a.search-results-for-type-title {\n      padding: 8px 16px;\n      font-size: 1.2em;\n      display: inline-block;\n      color: $anchor-active;\n      span.search-results-for-type-number-badge {\n        @include border-radius(6px);\n        padding: 2px 4px;\n        color: #fff;\n        background-color: $primary-brand;\n        display: inline-block;\n        font-size: 0.8em;\n        vertical-align: text-bottom;\n      }\n    }\n    ul.search-results-for-type-list {\n      list-style: none;\n      padding: 0 16px 8px 32px;\n      margin: 0;\n      li {\n        a {\n          padding: 4px 0;\n          display: block;\n        }\n      }\n    }\n  }\n}\n','$default-font: "Open Sans", sans-serif;\n$header-font: "Raleway";',"\ufeff@mixin box-shadow($shadows...) {\n    -webkit-box-shadow: $shadows;\n    -moz-box-shadow: $shadows;\n    box-shadow: $shadows;\n}\n","@mixin border-radius($radius) {\n  -webkit-border-radius: $radius;\n  border-radius: $radius;\n}\n\n// Single side border-radius\n\n@mixin border-top-radius($radius) {\n  -webkit-border-top-right-radius: $radius;\n  border-top-right-radius: $radius;\n  -webkit-border-top-left-radius: $radius;\n  border-top-left-radius: $radius;\n}\n@mixin border-right-radius($radius) {\n  -webkit-border-bottom-right-radius: $radius;\n  border-bottom-right-radius: $radius;\n  -webkit-border-top-right-radius: $radius;\n  border-top-right-radius: $radius;\n}\n@mixin border-bottom-radius($radius) {\n  -webkit-border-bottom-right-radius: $radius;\n  border-bottom-right-radius: $radius;\n  -webkit-border-bottom-left-radius: $radius;\n  border-bottom-left-radius: $radius;\n}\n@mixin border-left-radius($radius) {\n  -webkit-border-bottom-left-radius: $radius;\n  border-bottom-left-radius: $radius;\n  -webkit-border-top-left-radius: $radius;\n  border-top-left-radius: $radius;\n}","$body-background: #ffffff;\n$primary-background:  #f7f7f7;\n$hover-background: rgba(0,0,0,.08);\n$primary-border: #d8d8d8;\n$primary-brand: #FE5000;\n$primary-danger: #e00d0d;\n$primary-warning: #C38621;\n$icon-disabled: #C2BBBA;\n$secondary-brand: #7da1c4;\n$icon-enabled: #333;\n$primary-success: #06A755;\n$anchor-active:#3767C7;\n$default-text:#2f3940;"],sourceRoot:""}]);const a=i},920:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n='<template>\n    <div class="main-search-field">\n          <input id="main-search-input" type="search" value="" />\n          <button id="search-submit-button"></button>\n       <div id="search-results-container" class="search-results-container">\n          \n       </div>\n    </div>\n </template>'},638:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(s[i]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);n&&s[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},62:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=function(e){var r,n,s=(n=4,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,s=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw o}}return r}}(r,n)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=s[1],i=s[3];if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),l="/*# ".concat(c," */"),d=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[o].concat(d).concat([l]).join("\n")}return[o].join("\n")}},397:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;const s=r(969),o=r(773),i=r(804);t.Component=e=>t=>{var r;const a=e.tag||i.toKebabCase(t.prototype.constructor.name),c=((r=class extends t{constructor(){super(),this.props={},this.showShadowRoot=null==e.shadow||e.shadow,!this.shadowRoot&&this.showShadowRoot&&this.attachShadow({mode:"open"})}static get observedAttributes(){return Object.keys(this.propsInit||{}).map((e=>i.toKebabCase(e)))}attributeChangedCallback(e,t,r){this.onAttributeChange(e,t,r)}onAttributeChange(e,t,r,n=!0){if(t!=r){n&&(this[i.toCamelCase(e)]=r);const s=this.constructor.watchAttributes;if(s&&s[e]){const n=s[e];this.__connected&&"function"==typeof this[n]&&this[n]({old:t,new:r})}}}connectedCallback(){const e=Object.create(null,{connectedCallback:{get:()=>super.connectedCallback}});return n(this,void 0,void 0,(function*(){yield this.render(),e.connectedCallback&&e.connectedCallback.call(this),this.__connected=!0,s.addEventListeners(this),o.initializeProps(this)}))}render(){return n(this,void 0,void 0,(function*(){if(this.__connected)return;const t=document.createElement("template");t.innerHTML=yield this.getStyle(),e.template instanceof Promise?t.content.appendChild(yield this.getExternalTemplate()):"string"==typeof e.template&&(t.innerHTML+=e.template),(this.showShadowRoot?this.shadowRoot:this).appendChild(t.content.cloneNode(!0))}))}getExternalTemplate(){return n(this,void 0,void 0,(function*(){const t=(yield e.template).default.toString(),r=document.createRange().createContextualFragment(t);return 1===r.children.length&&"TEMPLATE"===r.children[0].nodeName?r.firstChild.content:r}))}getStyle(){return n(this,void 0,void 0,(function*(){let t;return e.style instanceof Promise?t=(yield e.style).default.toString():"string"==typeof e.style&&(t=e.style),t?`<style>${t}</style>`:""}))}}).__connected=!1,r.ready=new Promise(((e,t)=>e(!0))),r);return customElements.get(a)||customElements.define(a,c),c}},985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomElement=void 0;class r extends HTMLElement{constructor(){super()}connect(e){this.isConnected||document.querySelector(e).appendChild(this)}}t.CustomElement=r},265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShadowRootElement=t.getElement=void 0,t.getElement=e=>document.querySelector(e),t.getShadowRootElement=(e,t)=>e.shadowRoot.querySelector(t)},406:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(397),t),s(r(985),t),s(r(265),t),s(r(969),t),s(r(773),t),s(r(271),t),s(r(766),t),s(r(938),t)},969:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dispatch=t.addEventListeners=t.Listen=void 0;const n=r(804);t.Listen=(e,t)=>(r,n)=>{r.constructor.listeners||(r.constructor.listeners=[]),r.constructor.listeners.push({selector:t,eventName:e,handler:r[n]})},t.addEventListeners=e=>{if(e.constructor.listeners){const t=e.shadowRoot||e;for(const r of e.constructor.listeners){const n=r.selector?t.querySelector(r.selector)?t.querySelector(r.selector):null:e;n&&n.addEventListener(r.eventName,(t=>{r.handler.call(e,t)}))}}},t.Dispatch=e=>(t,r)=>{Object.defineProperty(t,r,{get:function(){const t=this;return{emit(s){const o=e||n.toDotCase(r);t.dispatchEvent(new CustomEvent(o,s))}}}})}},773:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeProps=t.Prop=void 0;const n=r(804);t.Prop=()=>(e,t)=>{const r=n.toKebabCase(t);e.constructor.propsInit||(e.constructor.propsInit={}),e.constructor.propsInit[t]=null,Object.defineProperty(e,t,{get:function(){return this.props[t]?this.props[t]:this.getAttribute(r)},set:function(e){if(this.__connected){const s=this.props[t];this.props[t]=n.tryParseInt(e),"object"!=typeof e?this.setAttribute(r,e):this.onAttributeChange(r,s,e,!1)}else this.hasAttribute(n.toKebabCase(t))||(this.constructor.propsInit[t]=e)}})},t.initializeProps=e=>{const t=e.constructor.watchAttributes;for(let r of(e=>{const t=e.constructor.watchAttributes,r=Object.assign({},t);Object.keys(r).forEach((e=>r[e]=""));const n=Object.assign(Object.assign({},r),e.constructor.propsInit);return Object.keys(n)})(e)){if(t)if(null==t[n.toKebabCase(r)])t[n.toKebabCase(r)]="";else{const s=e.props[r]||e.getAttribute(n.toKebabCase(r));"function"==typeof e[t[r]]&&e[t[r]]({new:s})}e.constructor.propsInit[r]&&(e.hasAttribute(n.toKebabCase(r))||(e[r]=e.constructor.propsInit[r]))}}},271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Toggle=void 0;const n=r(804);t.Toggle=()=>(e,t)=>{e.constructor.propsInit||(e.constructor.propsInit={}),e.constructor.propsInit[t]=null,Object.defineProperty(e,t,{get:function(){return(e=>{if(this.hasAttribute(e)){const t=this.getAttribute(e);return!!/^(true|false|^$)$/.test(t)&&("true"==t||""==t)}return!1})(t)},set:function(e){const r=e;if(null!=e)switch(typeof e){case"boolean":break;case"string":/^(true|false|^$)$/.test(e)?e="true"==r||""==r:(console.warn(`TypeError: Cannot set boolean toggle property '${t}' to '${e}'`),e=!1);break;default:throw`TypeError: Cannot set boolean toggle property '${t}' to '${e}'`}this.__connected?(this.props[t]=e||!1,""!==r&&null!==r?this.setAttribute(t,e):e?this.setAttribute(t,""):this.removeAttribute(t)):this.hasAttribute(n.toKebabCase(t))||(this.constructor.propsInit[t]=e)}})}},766:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},804:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryParseInt=t.toDotCase=t.toCamelCase=t.toKebabCase=void 0,t.toKebabCase=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),t.toCamelCase=e=>e.toLowerCase().replace(/(\-\w)/g,(e=>e[1].toUpperCase())),t.toDotCase=e=>e.replace(/(?!^)([A-Z])/g," $1").replace(/[_\s]+(?=[a-zA-Z])/g,".").toLowerCase(),t.tryParseInt=e=>parseInt(e)==e&&NaN!==parseFloat(e)?parseInt(e):e},938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;const n=r(804);t.Watch=e=>(t,r)=>{t.constructor.watchAttributes||(t.constructor.watchAttributes={}),t.constructor.watchAttributes[n.toKebabCase(e)]=r,t.constructor.propsInit||(t.constructor.propsInit={}),t.constructor.propsInit[e]=null}},768:e=>{e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 34 35" style="enable-background:new 0 0 34 35;" xml:space="preserve"><style type="text/css"> .__24nL31r__st0{fill:#B0A9A2;} </style><g><path class="__24nL31r__st0 " d="M23.6,22.8c2.2-2.4,3.6-5.7,3.6-9.2C27.2,6.1,21.1,0,13.6,0C6.1,0,0,6.1,0,13.6c0,7.5,6.1,13.6,13.6,13.6 c3.1,0,5.9-1,8.1-2.7l10.1,10.1c0.2,0.2,0.6,0.4,0.9,0.4c0.3,0,0.6-0.1,0.9-0.4c0.5-0.5,0.5-1.3,0-1.7L23.6,22.8z M2.5,13.6 c0-6.1,5-11.1,11.1-11.1c6.1,0,11.1,5,11.1,11.1s-5,11.1-11.1,11.1S2.5,19.7,2.5,13.6L2.5,13.6z"></path></g></svg>'},306:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,r,n){var s,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MainSearchField=void 0;const c=r(406),l=r(480),d=r(388),u=a(r(768));let p=class extends c.CustomElement{constructor(){super(),this.searchString="",this.renderSearchResultsForType=e=>{const t=e.Results[0].TypeTranslated,r=e.searchResultsType,n=e.Results.map((e=>`<li>${d.renderDropdownResultLink(e,r,this.searchString,this.environment)}</li>`)).join("");return`\n      <div class="search-results-for-type">\n         <a href="/metadata?text=${this.searchString}&type=${r}" class="search-results-for-type-title">\n            ${t}\n            <span class="search-results-for-type-number-badge">\n               ${e.NumFound}\n            </span>\n         </a>\n         <ul class="search-results-for-type-list">\n            ${n}\n         </ul>\n      </div>`},this.renderSearchResults=e=>`<div>${e.map((e=>this.renderSearchResultsForType(e))).join("")}</div>`,this.hideSearchResultsContainer=()=>{this.showSearchResults=!1},this.clickOutsideSearchResultsContainer=this.clickOutsideSearchResultsContainer.bind(this)}setup(e){this.connect(e.container),e.id&&(this.id=e.id)}connectedCallback(){this.searchField=c.getShadowRootElement(this,"#main-search-input"),this.searchButton=c.getShadowRootElement(this,"#search-submit-button"),this.searchButton.innerHTML=u.default,this.searchResultsContainer=c.getShadowRootElement(this,"#search-results-container"),this.searchField&&this.searchString&&this.searchField.setAttribute("value",this.searchString),document.addEventListener("click",this.clickOutsideSearchResultsContainer)}disconnectedCallback(){document.removeEventListener("click",this.clickOutsideSearchResultsContainer)}clickOutsideSearchResultsContainer(e){const t=e.composedPath()[0];t.closest("#search-results-container")||t.closest("#main-search-input")||this.hideSearchResultsContainer()}submitSearch(){this.preventRedirect?this.onSearch.emit({detail:{searchString:this.searchString}}):window.location.href=`${d.getKartkatalogUrl(this.environment)}/metadata?text=${this.searchString}`}searchFieldKeyUp(e){e.code&&"Enter"===e.key?this.submitSearch():this.searchString=this.searchField.value}onSearchSubmitted(e){this.submitSearch()}searchStringChanged(){this.searchField&&this.searchString&&this.searchField.setAttribute("value",this.searchString),l.fetchDropdownSearchResults(this.searchString,this.language,this.environment).then((e=>{this.searchResultsResponses=e}))}showSearchResultsChanged(){this.showSearchResults?this.searchResultsContainer.classList.add("open"):this.searchResultsContainer.classList.remove("open")}searchResultsResponseChanged(){const e=this.searchResultsResponses&&this.searchResultsResponses.length?this.searchResultsResponses.filter((e=>e.NumFound>0)):[];this.searchResultsContainer.innerHTML=e.length?this.renderSearchResults(e):"",this.showSearchResults=!!e.length}static setup(e,t){const r=c.getElement(e);t.onClick&&r.addEventListener("searchButtonClick",t.onClick),t.active&&(r.showSearchResults=t.active)}};p.elementSelector="main-search-field",o([c.Prop()],p.prototype,"id",void 0),o([c.Prop()],p.prototype,"environment",void 0),o([c.Toggle()],p.prototype,"showSearchResults",void 0),o([c.Toggle()],p.prototype,"preventRedirect",void 0),o([c.Prop()],p.prototype,"searchString",void 0),o([c.Prop()],p.prototype,"language",void 0),o([c.Prop()],p.prototype,"searchResultsResponses",void 0),o([c.Dispatch("searchResultsChanged")],p.prototype,"onTextChanged",void 0),o([c.Dispatch("onSearchStringChange")],p.prototype,"onSearchStringChange",void 0),o([c.Dispatch("onSearch")],p.prototype,"onSearch",void 0),o([c.Listen("keyup","input")],p.prototype,"searchFieldKeyUp",null),o([c.Listen("click","#search-submit-button")],p.prototype,"onSearchSubmitted",null),o([c.Watch("searchString")],p.prototype,"searchStringChanged",null),o([c.Watch("showsearchresults")],p.prototype,"showSearchResultsChanged",null),o([c.Watch("searchResultsResponses")],p.prototype,"searchResultsResponseChanged",null),p=o([c.Component({tag:"main-search-field",template:Promise.resolve().then((()=>i(r(920)))),style:Promise.resolve().then((()=>i(r(678))))})],p),t.MainSearchField=p},480:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchDropdownSearchResults=t.fetchMenuItems=t.getGeonorgeMenuUrl=t.getKartkatalogApiUrl=void 0,t.getKartkatalogApiUrl=e=>`https://kartkatalog.${"dev"===e||"test"===e?e+".":""}geonorge.no/api`,t.getGeonorgeMenuUrl=(e,t)=>`https://www.${"dev"===t||"test"===t?"test.":""}geonorge.no/${"en"===e?"en/":""}api/menu?omitLinks=1`,t.fetchMenuItems=(e="no",r="")=>{const n=t.getGeonorgeMenuUrl(e,r);return fetch(n).then((e=>e.json())).then((e=>e))},t.fetchDropdownSearchResults=(e="",n="no",s="")=>r(void 0,void 0,void 0,(function*(){const o={dataset:`search?text=${e}&facets%5B1%5Dname=type&facets%5B1%5Dvalue=dataset`,series:`search?text=${e}&facets%5B1%5Dname=type&facets%5B1%5Dvalue=series`,service:`search?text=${e}&facets%5B1%5Dname=type&facets%5B1%5Dvalue=service`,software:`search?text=${e}&facets%5B1%5Dname=type&facets%5B1%5Dvalue=software`,articles:"articles?text="+e},i={headers:new Headers({"Accept-Language":n})};return e&&e.length?yield Promise.all(Object.keys(o).map((e=>r(void 0,void 0,void 0,(function*(){const r=t.getKartkatalogApiUrl(s);return fetch(`${r}/${o[e]}&limit=5`,i).then((e=>e.json())).then((t=>Object.assign(Object.assign({},t),{searchResultsType:e})))}))))):null}))},388:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderDropdownResultLink=t.convertTextToUrlSlug=t.getGeonorgeUrl=t.getKartkatalogUrl=void 0,t.getKartkatalogUrl=e=>`https://kartkatalog.${"dev"===e||"test"===e?e+".":""}geonorge.no`,t.getGeonorgeUrl=e=>`https://www.${"dev"===e||"test"===e?"test.":""}geonorge.no`;const r=(e,t,r)=>(e=(e=(e=e.replace(new RegExp(`([^s])([${t}])([^s])`,"ig"),`$1 ${r} $3`)).replace(new RegExp(`([^s])([${t}])`,"ig"),"$1 "+r)).replace(new RegExp(`([${t}])([^s])`,"ig"),r+" $2")).replace(new RegExp(`[${t}]`,"ig"),r);t.convertTextToUrlSlug=(e="")=>(e=e.toLowerCase(),e=r(e,"&","and"),(e=(e=(e=(e=(e=(e=(e=(e=(e=r(e,"+","plus")).replace("æ","ae")).replace("ä","ae")).replace("ø","oe")).replace("ö","oe")).replace("å","aa")).replace(/( - )/g,"-")).replace(/[\s]+/g,"-")).replace(/[^a-z0-9-]+/gi,"")).replace(/^[^A-Z0-9]*|[^a-z0-9]*$/gi,""));const n=(e,t)=>{if(!t)return!1;t({event:"updateSearchString",category:"metadataSearch",activity:"dropDownResultsClick",searchString:e})};t.renderDropdownResultLink=(e,r,s,o,i)=>"articles"===r?`<a onClick="${n(s,i)}" href="${e.ShowDetailsUrl?e.ShowDetailsUrl:"#"}">${e.Title}</a>`:`<a onClick="${n(s,i)}" href="${t.getKartkatalogUrl(o)}/metadata/${t.convertTextToUrlSlug(e.Title)}/${e.Uuid}">${e.Title}</a>`}},t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={id:n,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(306)})()}));
//# sourceMappingURL=main-search-field.js.map